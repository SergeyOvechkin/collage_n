<!DOCTYPE html>
<html lang="ru">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="./css/bootstrap.min.css">

<style type="text/css"> 
body, html { 
	   position: relative; 
       margin: 0; 
       padding: 0;
	   height: 100%;
     }
#canvas_container{
	position: relative;	
	
	
}
.canvas-container{

   position: relative;
	width: 100%;	
	height: 90vh;
	overflow: hidden;
} 
canvas { 
     
     width: 100%;     
	 height: 100%px; 
	 margin: 0; 
     padding: 0;
	 border: none;
	 

   }
 .list-group-item:hover{
       cursor: pointer;
 
 }
.form-group {
    margin-bottom: 0.7rem;
}

[data-sprites] { 

	border: 1px solid black;
	padding: 2px;

}
[data-save_sprites]{
  margin-top: 10px; 
  border: 1px solid black; 
  margin-bottom: 10px; 
  padding: 5px;
 } 

[data-sprite] {

		background-color: #f5e2d2;
		padding: .0rem .0rem !important;
}
[data-sprite] button{

	padding: 0px;
	padding-left: 2px;
	padding-right: 2px;

}
.inp-file:hover{
	cursor: pointer;
}
.inp-file{
	background-color: green;
	color: white;
	padding: 2px;
}
[name="load_img"]{
	position: absolute;
	top: 0px;
	visibility: hidden;
}
.panel_phone_ing_1 {
	//background-color: #f5e2d2;
	margin-bottom: 5px;
	
} 
 .panel_phone_ing_1 .form-group{
	margin-top: 5px;
	margin: 0px;
 }
 .form-row .form-group{
	margin-bottom: 3px;
 }
 [name="scale_x_area"], [name="scale_y_area"]{
	position: relative;
	top: 2px;
	width: 60px;
	margin-top: 0px;
 }

</style>


</head>
	<body>
	

		
		<div class="container-fluid">
			<div class="row">
				<div class="col-8" id="canvas_container" >
						<div class="canvas-container">
							<canvas data-canvas="container" id="canvas"  ></canvas>
						</div>
				</div>
				<div class="col-4">
						    <form data-main_form="container" name="formA" onsubmit="return false" enctype="multipart/form-data" action="__URL__" method="POST" style="margin-top: 10px;">
								<div class="form-row panel_phone_ing_1">
									<div class="form-group col-md-3">
											
											<input name="load_url_img" type="text" class="form-control form-control-sm"  placeholder="img url" title="Url картинки сервера разрешающего crossorigin запросы">
									</div>
								    <div class="form-group col-md-3">
										 <div class="form-group">
											<label name="load_img_click" class="inp-file" for="exampleFormControlFile1" title="Загрузить картинку с компьютера">load img</label>
											<input name="load_img" type="file" class="form-control-file form-control-sm"  id="exampleFormControlFile1">
										</div>
									</div>
									<div class="form-group col-md-2">
										<button type="button"  name="save_img" class="btn btn-success btn-sm" title="Сделать снимок фонового изображения">save</button>
									</div>
									<div class="form-group col-md-2">
										<button type="button"  name="restore_img" class="btn btn-warning btn-sm" title="Отобразить предыдущий снимок фонового изображения">restore</button>
									</div>
									<div class="form-group col-md-2">
										<button type="button"  name="restart_img" class="btn btn-danger btn-sm" title="Восстановить начальное изображение">restart</button>
									</div>
								</div>
								<div class="form-row">
								
								 
									<div class="form-group col-md-3">
										
											<input name="img_main_scale_x" type="text" class="form-control form-control-sm"  placeholder="scale X" value="0.7" title="Коэффициент масштабирования по вертикали"> 
									</div>
									<div class="form-group col-md-3">
								
											<input name="img_main_scale_y" type="text" class="form-control form-control-sm"  placeholder="scale Y" value="0.7" title="Коэффициент масштабирования по горизонтали">
									</div>
									
									<div class="form-group col-md-3"> 
										<div class="form-check">
											<input type="checkbox" name="mirror_x"  class="form-check-input" >
											<label class="form-check-label" for="exampleCheck1">mirror_X</label>
										</div>	
									</div>	
									<div class="form-group col-md-3"> 
										<div class="form-check">
											<input type="checkbox" name="mirror_y"  class="form-check-input" >
											<label class="form-check-label" for="exampleCheck1">mirror_Y</label>
										</div>	
									</div>	
									
								 </div> 
								 <div class="form-row">
									<div class="form-group col-md-8">
										<label for="exampleFormControlInput1">Коэффициенты x,y масштабирования и отражение фона</label>
									</div>	
									<div class="form-group col-md-4">	
										<button type="button"  style="margin-top: 5px;" name="phone_scale_mirror" class="btn btn-primary btn-sm">Применить</button>
									</div>	
								</div>
								<div class="form-row">
									<div class="form-group col-md-6">
										<label for="exampleFormControlInput1">Точка после index:</label>
											<input name="add_index_point" type="text" class="form-control form-control-sm"  placeholder="индекс точки +1" title="Добавить точку к замкнутому контуру выделения области">
									</div>
									<div class="form-group col-md-6">
										<label for="exampleFormControlInput1">Удалить точку index:</label>
											<input name="rm_index_point" type="text" class="form-control form-control-sm"  placeholder="индекс точки" title="Удалить точку из контура выделения области">
									</div>
								 </div>
								 <div class="form-group">
										<label for="exampleFormControlInput1" style="font-size: 15px;">Вращать выделение, спрайт. Масштабировать выделение</label>
										<div class="form-row">
											<div class="form-group col-md-2">
												<input name="rotate_area" type="text" class="form-control form-control-sm"  placeholder="градус вращения" title="Вращать спрайт или выделенную область">
											</div>	
											<div class="form-group col-md-4"> 
												<div class="form-check">
													<input type="checkbox" name="smoothing"  class="form-check-input" id="exampleCheck1" title="Включить сглаживание для вращения">
													<label class="form-check-label" for="exampleCheck1" >Сглаживание</label>
												</div>	
											</div>
											<div class="form-group col-md-6">
												<input name="scale_x_area"  placeholder="scale x" type="text"    title="Масштабировать область выделения по оси X">
												<input name="scale_y_area"   placeholder="scale y"  type="text"   title="Масштабировать область выделения по оси Y">
												<button type="button"  name="scale_x_y" class="btn btn-success btn-sm">scale</button>
											</div>	
										</div>	
								 </div>

							     <button type="button"  style="margin-top: 5px;" name="scale_or_move_point" class="btn btn-warning btn-sm" title="Масштабировать по точкам выделения">Искажать</button>
								 <button type="button"  style="margin-top: 5px;" name="mirror_x_area" class="btn btn-primary btn-sm" title="Отразить выделенную область по горизонтали">mirror x</button>
								 <button type="button"  style="margin-top: 5px;" name="mirror_y_area" class="btn btn-primary btn-sm" title="Отразить выделенную область по вертикали">mirror y</button>
								 <button type="button"  style="margin-top: 5px;" name="reset_area" class="btn btn-dark btn-sm">Сбросить выделение</button> 
								  <button type="button"  style="margin-top: 5px;" name="clear_phone" class="btn btn-secondary btn-sm" title="Установить прозрачность фона = 0">Очистить фон</button>
								 <button type="button"  style="margin-top: 5px;" name="operation_with" class="btn btn-primary btn-sm">Работать с фоновым изображением</button>
								 <button type="button" style="margin-top: 5px;" name="create_sprite" class="btn btn-success btn-sm">Создать Sprite</button>


								 		
							</form>
							
							<ul data-sprites="array" class="list-group" style="margin-top: 10px; margin-bottom: 10px; max-height: 300px; overflow: auto;">
								<li data-sprite="template" class="list-group-item">
									<!--<span name="id"></span>-->
									<input name="id" type="text"  placeholder="" title="Изменить id спрайта">
									<button type="button" name="rm_sprite" class="btn btn-danger btn-sm">Удалить</button>
									<button type="button" name="show_sprite" class="btn btn-secondary btn-sm">Скрыть</button>
									<button type="button" name="layer_up" class="btn btn-info btn-sm" title="Поднять спрайт на верхний слой">Слой up</button>
									<button type="button" name="stamp" class="btn btn-secondary btn-sm" title="Сделать отпечаток спрайта на фоновом изображении">Штамп</button>
									<button type="button" name="copy_contur" class="btn btn-warning btn-sm" title="Скоприровать контур спрайта на фоную картинку">Copy contur</button>
									<button type="button" name="stamp_cursor" class="btn btn-secondary btn-sm" title="Сделать отпечаток спрайта на фоновом изображении с помощью курсора мыши">Штамп курсор</button>
									<button type="button" name="save_sprite" class="btn  btn-success btn-sm" title="Сохранить спрайт на компьютере в локальном хранилище">Save on PC</button>
									
								</li>
							</ul>
							
							<form name="form_effects" onsubmit="return false" data-form_effects="container" style="margin-top: 10px;">
								<div class="form-row">
									<div class="form-group col-md-3">
											<input type="text" name="color_r"  class="form-control form-control-sm"  placeholder="Red 0-255">	
									</div>
									<div class="form-group col-md-3">
											<input type="text" name="color_g"  class="form-control form-control-sm"  placeholder="Green 0-255">	
									</div>
									
									<div class="form-group col-md-3"> 										  
											<input type="text" name="color_b" class="form-control form-control-sm"  placeholder="Blue 0-255">																					
									</div>	
									<div class="form-group col-md-3"> 
											<input type="text" name="color_a"  class="form-control form-control-sm"  placeholder="Opacity 0-255">
									</div>						
								 </div> 
								 <div class="form-row">
									<div class="form-group col-md-8">
										<label for="exampleFormControlInput1">Цвет пикселя либо формула (+=n, -=n, /=n, *=n)</label>
									</div>	
									<div class="form-group col-md-4">	
										<button type="button"  style="margin-top: 5px;" name="rgba_effect" class="btn btn-primary btn-sm" title="Применить ко всем свойствам или к некоторым (оставить поля пустыми)">Применить к выделению</button>
									</div>	
								</div>
								<div class="form-row">
									<div class="form-group col-md-8">
										<label for="exampleFormControlInput1">Формула для обработки пикселя R,G,B,A,X,Y,W,H,TMP</label>
										<textarea name="function_to_pixels" rows="10" cols="45" type="text" class="form-control form-control-sm"  placeholder="R - red, G - green, B - blue, A - opacity, X - индекс текущего пикселя по ширине, Y - индекс текущего пикселя по высоте, W - общая ширина, H - высота, TMP - объект для хранения временных данных между итерациями цикла;
										пример - покрасить черный в красный:        if(R+G+B < 70){   R=255; }
										пример TMP:    if(TMP.num == undefined){ TMP.num = 0; } else {  TMP.num +=1;  if(TMP.num > 7000) R +=155; }"></textarea>
									</div>	
									<div class="form-group col-md-4">	
										<button type="button"  style="margin-top: 5px;" name="function_to_pixels_click" class="btn btn-primary btn-sm">Применить формулу</button>
									</div>	
								</div>
							</form>
							
							<div data-save_sprites="array">
								<button  type="button" name="load_save_sprites" class="btn btn-danger btn-sm">Показать сохраненные спрайты</button>
								<ul  class="list-group" style="max-height: 300px; overflow: auto; margin-top: 10px; ">
									<li data-save_sprite="template" class="list-group-item" >
										<span name="id"></span>
										<button type="button" name="create_save_sprite" class="btn btn-primary btn-sm">Создать</button>
										<button type="button" name="rm_save_sprite" class="btn btn-danger btn-sm">Удалить</button>									
									</li>
								</ul>						
							</div>
				</div>
			</div>
		</div>
		
		
 
		
	   
	   <script src="./js/htmlix.js"></script>
	   <script src="./js/sprites.js"></script>
	   <script src="./js/functions.js"></script>
	    <script src="./js/functions_new.js"></script>
	   <script src="./js/main.js"></script>
	   <script src="./js/interface.js"></script>

    </body>
	
</html>